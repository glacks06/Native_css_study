# CSS 컨테이너 쿼리(Container Queries) 종합 보고서

이 보고서는 CSS 컨테이너 쿼리의 개념, 주요 속성, 동작 원리, 적용 시 발생 가능한 문제와 해결 방안, 그리고 쿼리에서 사용할 수 있는 조건들까지, 사용자와의 질의 흐름을 바탕으로 정리합니다.

***

## 1. 컨테이너 쿼리의 기본 개념

컨테이너 쿼리는 요소의 **컨테이너(부모 요소)**의 특정 속성(크기, 스타일, 스크롤 상태 등)에 따라 스타일을 적용할 수 있게 해주는 CSS 기능입니다. 이는 미디어 쿼리(@media)가 브라우저(뷰포트) 특성에 따른 반응형 디자인을 적용하는 것과 대비됩니다.  
컨테이너 쿼리는 **컴포넌트 단위로 더 세밀한 반응형 설계**를 가능하게 합니다.

***

## 2. 컨테이너 쿼리 조건의 종류

컨테이너 쿼리는 아래와 같이 다양한 조건(쿼리 종류)을 지원합니다.

### 2.1 크기(사이즈) 조건

- **width, min-width, max-width**: 컨테이너의 가로 너비 기준
- **height, min-height, max-height**: 컨테이너의 세로 높이 기준 (container-type: size;일 때만 가능)
- **inline-size, min-inline-size, max-inline-size**: 글쓰기 방향(좌→우 등)과 관계없이 인라인 방향 너비 기준
- **block-size, min-block-size, max-block-size**: 블록 방향(세로 또는 글쓰기 기준 방향) 크기 기준

### 2.2 스타일(Style) 조건

- 컨테이너의 특정 **CSS 속성 값**(예: background-color, display, overflow 등)에 따라 스타일 분기 가능  
- 예: `@container style(background-color: blue) { ... }`

### 2.3 스크롤 상태(Scroll State) 조건

- 컨테이너 자체나 조상 스크롤 컨테이너의 스크롤 상태에 따라 스타일 분기 가능  
- 예: `@container (scroll-state: scrolled) { ... }`

### 2.4 기타 논리 조건

- **복합 조건**: 위 조건들을 AND, OR, NOT(반전) 등 논리 연산으로 조합 가능
- 예:  
  ```css
  @container (min-width: 600px) and (style(display: flex)) { ... }
  @container not (width > 800px) { ... }
  ```

***

## 3. 주요 속성: `container-type`과 값별 영향

| 속성 값             | 기준 크기/상태   | 컨테인먼트 영향      | 특징                                     |
|-------------------|----------------|-------------------|-----------------------------------------|
| size              | 가로+세로      | 가로+세로 독립      | 너비/높이 모두 자식과 분리, 모든 크기 조건 가능      |
| inline-size       | 가로만         | 가로만 독립        | 세로는 자식 영향, 인라인 크기만 조건 가능         |
| normal            | X              | 없음               | 쿼리 컨테이너 아님                        |
| scroll-state      | 스크롤 상태    | 없음               | 스크롤 상태 조건에만 사용                  |

***

## 4. 컨테이너 쿼리의 동작 원리와 사용법

- 컨테이너에 `container-type`, 필요시 `container-name` 속성 지정
- `@container` at-rule로 크기, 스타일, 스크롤 상태 기준 조건 정의
- 크기 컨테이너(`size`, `inline-size`)는 크기 컨테인먼트가 적용되어 자식과 독립적으로 크기 설정됨

```css
.container {
  container-type: inline-size;
}

/* 너비 500px 이상일 때 */
@container (min-width: 500px) {
  .container .child {
    background: skyblue;
  }
}

/* 스타일 쿼리 예시 */
@container style(background-color: blue) {
  .container .child {
    color: white;
  }
}
```

***

## 5. 컨테이너 쿼리와 미디어 쿼리의 차이

| 비교 항목      | 미디어 쿼리 (@media)       | 컨테이너 쿼리 (@container)        |
|-------------|------------------------|-----------------------------|
| 작동 기준      | 브라우저 뷰포트(전체 화면)     | 특정 컨테이너(부모 요소)              |
| 대상 범위      | 전체 또는 뷰포트 조건         | 해당 컨테이너 하위 요소                 |
| 세밀한 반응형   | 제한적                   | 컴포넌트 단위로 세밀하게 가능               |

***

## 6. 적용 시 발생하는 문제와 해결

### 6.1 겹침/레이아웃 문제  
- 원인: `container-type`은 레이아웃을 직접 바꾸지 않음.  
- 해결: `display`, `width`, `margin`, `height` 등 별도 레이아웃 속성으로 정렬/간격 명확히 지정.

### 6.2 요소 크기 0 현상  
- 원인: 크기 컨테이너 요소는 자식 콘텐츠 크기와 무관하게 동작.  
- 해결: `width`, `height`, `min-height` 등으로 크기를 명시적 또는 문맥적으로 정의.

***

## 7. 결론

컨테이너 쿼리는 미디어 쿼리에서 한계였던 컴포넌트 단위의 반응형을 가능하게 하며, 크기, 스타일, 스크롤 상태 등 다양한 조건으로 강력한 조건부 스타일링을 지원합니다.  
단, 컨테이너의 크기와 레이아웃은 반드시 명확하게 지정해야 하며, 컨테이너 타입별(특히 `size`, `inline-size`) 동작 특징을 이해하고 적용해야 예기치 않은 문제 없이 활용할 수 있습니다.


--

# CSS 컨테이너 쿼리(Container Queries)에 대한 종합 보고서

이 보고서는 CSS 컨테이너 쿼리(Container Queries)에 대한 이해와 사용법을 중심으로, 사용자와의 대화 흐름을 바탕으로 작성되었습니다. 컨테이너 쿼리의 기본 개념부터 구체적인 속성 및 동작 원리, 그리고 실제 적용 시 발생할 수 있는 문제와 해결 방안에 대해 다룹니다.

## 1. 컨테이너 쿼리의 기본 개념

컨테이너 쿼리는 CSS에서 요소의 컨테이너(부모 요소)의 특정 속성(크기, 스타일, 스크롤 상태 등)에 따라 스타일을 적용하는 기능입니다. 이는 기존의 미디어 쿼리(@media)가 뷰포트(브라우저 창) 크기나 디바이스 특성을 기준으로 스타일을 적용하는 것과 대조됩니다. 컨테이너 쿼리를 통해 컴포넌트 단위의 반응형 디자인을 보다 세밀하게 구현할 수 있습니다.

## 2. 주요 속성: `container-type`과 값별 영향

### 2.1 `container-type` 속성의 역할
- `container-type`은 요소를 컨테이너 쿼리의 대상이 되는 쿼리 컨테이너로 지정합니다.
- 이 속성은 특정 컨테인먼트(Containment)를 적용하여 컨테이너 쿼리가 안정적으로 동작하도록 합니다.

### 2.2 `size`와 `inline-size`의 차이점
- **`size`**:
  - 가로(inline)와 세로(block) 방향 모두를 기준으로 쿼리를 설정합니다.
  - 레이아웃, 스타일, 크기 컨테인먼트가 적용되어 컨테이너 크기가 자식 콘텐츠와 완전히 독립적으로 계산됩니다.
  - 너비(`width`)와 높이(`height`)가 명시적으로 설정되지 않으면 크기가 0으로 계산되어 요소가 보이지 않을 수 있습니다.
- **`inline-size`**:
  - 가로(inline) 방향만을 기준으로 쿼리를 설정합니다.
  - 레이아웃, 스타일, 인라인 크기 컨테인먼트가 적용되어 너비는 자식 콘텐츠와 독립적이지만, 높이는 자식 콘텐츠의 영향을 받을 수 있습니다.
  - 높이가 설정되지 않고 자식 콘텐츠가 없거나 높이가 0이면 컨테이너 높이도 0이 되어 보이지 않을 수 있습니다.

### 2.3 크기 컨테인먼트의 의미
- 자식 콘텐츠와 독립적으로 계산된다는 것은 컨테이너 크기가 자식 콘텐츠의 크기나 스타일 변화에 영향을 받지 않는다는 뜻입니다.
- 따라서 컨테이너의 크기는 명시적 설정(`width`, `height`) 또는 문맥적 설정(부모 요소의 크기나 레이아웃 구조)에 의해 결정되어야 합니다.

## 3. 컨테이너 쿼리의 동작 원리와 사용법

### 3.1 컨테이너 쿼리 정의
- `@container` at-rule을 사용하여 컨테이너 크기나 상태에 따라 스타일을 조건적으로 적용합니다.
- 예를 들어, 컨테이너 너비가 특정 값 이상일 때 자식 요소의 스타일을 변경할 수 있습니다.

```css
.container {
  container-type: inline-size;
}

@container (min-width: 500px) {
  .container .child {
    background-color: blue;
  }
}
```

### 3.2 컨테이너 이름 지정
- `container-name` 속성으로 컨테이너에 이름을 부여하여 특정 컨테이너를 대상으로 쿼리를 적용할 수 있습니다.

```css
.container {
  container-type: inline-size;
  container-name: sidebar;
}

@container sidebar (min-width: 500px) {
  .container .child {
    font-size: 2em;
  }
}
```

### 3.3 단축 문법과 길이 단위
- `container` 속성으로 `container-type`과 `container-name`을 동시에 선언 가능합니다.
- 컨테이너 쿼리 길이 단위(`cqw`, `cqh`, `cqi` 등)를 활용해 컨테이너 크기에 상대적인 스타일링이 가능합니다.

## 4. 컨테이너 쿼리와 미디어 쿼리의 차이

| 항목          | 미디어 쿼리 (@media)                 | 컨테이너 쿼리 (@container)                 |
|-------------|--------------------------------|---------------------------------------|
| 작동 기준      | 브라우저 뷰포트(전체 화면 크기)              | 특정 컨테이너(부모 요소)의 크기                   |
| 적용 범위      | 페이지 전체 또는 특정 뷰포트 상태 기반           | 지정된 컨테이너 내부의 자식 요소들에 국한            |
| 반응성 수준    | 전체 페이지 반응형 디자인에 적합                | 컴포넌트 단위, 더 세밀하고 유연한 반응형 가능             |

## 5. 적용 시 발생한 문제와 해결 방안

### 5.1 요소 겹침 문제
- **문제**: `container-type: size;` 또는 `inline-size;`를 설정한 요소가 다른 요소와 겹쳐 보이는 현상이 발생.
- **원인**: `container-type` 자체는 레이아웃 속성을 변경하지 않으며, 겹침은 `display`, `width`, `margin` 등 레이아웃 속성 부족으로 인해 발생.
- **해결 방안**:
  - `display: block;`과 `width: 100%;`를 명시하거나, 상위 컨테이너를 추가해 Flexbox나 Grid로 수직 배치를 보장.
  - 브라우저 기본 스타일 초기화(`margin: 0; padding: 0;`)를 통해 간섭 방지.

### 5.2 요소가 보이지 않는 문제
- **문제**: `container-type: size;` 설정 시 높이(`height`)를 지정하지 않으면 요소가 보이지 않음.
- **원인**: 크기 컨테인먼트로 인해 자식 콘텐츠와 독립적으로 계산되며, 높이가 명시되지 않으면 0으로 계산됨.
- **해결 방안**:
  - `height` 또는 `min-height`를 명시적으로 설정.
  - `container-type: inline-size;`로 변경하여 세로 방향 컨테인먼트를 제외.

## 6. 결론 및 활용 팁

컨테이너 쿼리는 컴포넌트 단위의 반응형 디자인을 구현하는 강력한 도구로, 미디어 쿼리보다 세밀한 스타일 조정이 가능합니다. 그러나 `container-type` 설정 시 크기 컨테인먼트로 인해 예상치 못한 크기 계산(요소가 보이지 않음)이나 레이아웃 문제(겹침)가 발생할 수 있으므로, 다음과 같은 점을 유의해야 합니다:
- 컨테이너 크기를 명시적 또는 문맥적으로 정의하여 크기 컨테인먼트의 영향을 관리.
- 레이아웃 속성을 명확히 설정하여 겹침 문제를 방지.
- `size`와 `inline-size`를 상황에 맞게 선택하여 적절한 컨테인먼트를 적용.
