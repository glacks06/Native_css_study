# CSS 네스팅(Nesting) 기능 이해 및 처리 흐름 보고서


## 1. 개요

CSS 네스팅은 스타일 선택자를 계층적이고 중첩된 형태로 작성할 수 있게 해, 코드의 가독성과 유지 보수성을 크게 향상시키는 기능입니다. 전통적 CSS에 비해 개발자가 구조적이며 직관적인 방식으로 스타일을 작성할 수 있도록 해줍니다.

본 보고서에서는 네스팅 기능을 사용할 때 발생하는 처리 과정과 네이티브 CSS 네스팅과 전처리기 기반 네스팅 간의 차이를 비교해 설명합니다.



## 2. 네스팅 기능과 기존 CSS 처리 방식 차이점

### 2.1 기존 CSS 방식

- CSS는 평면적 룰셋 리스트로 관리됩니다.
- 각 룰셋은 독립적으로 선택자-스타일 쌍을 구성하며, 선택자의 계층 구조는 문자열로 표현됩니다.
- 브라우저는 CSSOM과 DOM을 매칭해 렌더 트리를 생성한다.

### 2.2 네스팅 기능 사용 시 처리 방식

- 네스팅 문법은 계층적이고 중첩된 선택자를 작성 가능하게 한다.
- 컴파일(빌드) 혹은 브라우저 내부에서 네스팅을 평면화(flattening)하여 기존 CSS 선택자 형태로 변환한다.
- 변환된 선택자는 기존 방식과 동일하게 DOM 요소에 적용되어 스타일 계산과 렌더링 과정을 거친다.



## 3. 네이티브 CSS 네스팅 vs 전처리기 네스팅

| 구분            | 전처리기(Sass, Less 등) 네스팅     | 네이티브 CSS 네스팅                    |
|----------------|---------------------------|-------------------------------|
| 변환 시점        | 개발 시 컴파일 단계               | 브라우저의 런타임 파서 내부              |
| 처리 방법        | 빌드 과정에서 평면 CSS로 변환        | 브라우저 엔진 내부에서 평면 CSS로 변환       |
| 개발 편의성      | 개발 환경 의존성 있음              | 표준화 및 브라우저 지원으로 독립적 구현 가능     |
| 성능 영향        | 빌드 성능에 영향                  | 런타임 파서에 부담이나 최신 엔진 최적화로 경감 가능 |



## 4. 네스팅 적용 시 CSS 처리 흐름

1. **중첩 CSS 작성**  
   네스팅 문법으로 중첩 선택자와 속성을 작성한다.

2. **평면화 과정**  
   전처리기 기반은 빌드 시 네스팅 선택자를 일반 CSS 선택자로 변환한다.  
   네이티브 CSS는 브라우저 내부 게층적 문법을 해석해 동적으로 평면화한다.

3. **스타일 계산 및 매칭**  
   평면화된 선택자가 DOM 요소와 매칭되어 스타일 계산이 이루어진다.

4. **렌더 트리 생성 및 페인팅**  
   계산된 스타일을 토대로 화면 렌더링이 수행된다.



## 5. 결론

- CSS 네스팅은 기존 CSS 방식과 근본적 렌더링 처리 방식에서 차이 없이, 중첩 구문을 평면 CSS로 변환 후 처리하는 구조다.  
- 네이티브 네스팅의 장점은 개발자가 별도의 빌드 도구 없이도 풍부한 중첩 문법을 사용할 수 있다는 점.  
- 표준과 브라우저 지원 확대에 따라 네스팅 문법의 활용도와 편리성이 크게 증가할 전망이다.
